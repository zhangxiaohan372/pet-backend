edition: 3.0.0
name: pet-rescue-api
access: default

vars:
  region: cn-hangzhou

services:
  pet-rescue:
    component: fc3
    actions:
      pre-deploy:
        - run: echo '开始部署'
    props:
      region: ${vars.region}
      service:
        name: pet-rescue-service
        description: 'Pet Rescue Service'
      function:
        name: pet-rescue-api
        description: 'Pet Rescue API Function'
        runtime: nodejs18
        handler: src/index.handler
        memorySize: 512
        timeout: 60
        codeUri: './'
        instanceType: e1
        environmentVariables:
          NODE_ENV: production
      triggers:
        - type: http
          name: default-http
          config:
            authType: anonymous
            methods:
              - GET
              - POST
              - PUT
              - DELETE
              - OPTIONS
      